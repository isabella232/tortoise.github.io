<!DOCTYPE html> <html class=no-js > <meta charset=utf-8 > <meta http-equiv=X-UA-Compatible  content="IE=edge,chrome=1"> <title> 0.16.6 </title> <meta name=description  content=""> <meta name=viewport  content="width=device-width"> <link rel=stylesheet  href="./theme/css/style.min.css?a467741e"> <div id=wrapper > <header id=sidebar  class=side-shadow > <hgroup id=site-header  style="padding-top: 20px;"> <a id=site-title  href=.  style="padding: 0;"><img src="/images/tortoise.png" width=191pm  height=102px  style="display: block; margin: auto;"/><h1 style="margin: 0; text-align: center;"> Tortoise ORM</h1></a> <div id=site-desc  style="text-align: center;"> Tortoise ORM news & releases </div> </hgroup> <nav> <ul id=nav-links > <li><a href="https://tortoise-orm.readthedocs.io/">Documentation</a> <li><a href="https://gitter.im/tortoise/community">Chat on Gitter</a> <li><a href="https://github.com/tortoise/tortoise-orm">Source</a> </ul> </nav> <footer id=site-info > <p> Proudly powered by <a href="http://getpelican.com/" target=pelican >Pelican</a> &amp; <a href="http://python.org/" target=python >Python</a>. </p> <p> Theme based on <a href="https://github.com/hdra/pelican-cait" target=github >cait</a>. </p> </footer></header> <div id=post-container > <ol id=post-list > <li> <article class=post-entry > <header class=entry-header > <time class=post-time  datetime="2020-04-18T01:00:00+02:00" pubdate> Sat 18 April 2020 </time> <a href="./0166.html" rel=bookmark ><h1>0.16.6</h1></a> </header> <section class=post-content > <p>We are proud to announce the 0.16.6 release of Tortoise <span class=caps >ORM</span></p> <p>To update/install&nbsp;do:</p> <pre class=literal-block >
pip install -U tortoise-orm
</pre> <p>This is a security fix release, and we strongly recommend you&nbsp;upgrade.</p> <div class=section  id=security-fixes > <h2>Security&nbsp;Fixes</h2> <ul class=simple > <li>Fixed <span class=caps >SQL</span> injection issue in&nbsp;MySQL <li>Fixed <span class=caps >SQL</span> injection issues in MySQL when using <tt class="docutils literal">contains</tt>, <tt class="docutils literal">starts_with</tt> or <tt class="docutils literal">ends_with</tt> filters (and their case-insensitive&nbsp;counterparts) <li>Fixed malformed <span class=caps >SQL</span> for PostgreSQL and SQLite when using <tt class="docutils literal">contains</tt>, <tt class="docutils literal">starts_with</tt> or <tt class="docutils literal">ends_with</tt> filters (and their case-insensitive&nbsp;counterparts) </ul> </div> <div class=section  id=other-changes > <h2>Other&nbsp;changes</h2> <ul> <li><p class=first >Added support for partial&nbsp;models:</p> <p>To create a partial model, one can do a <tt class="docutils literal"><span class=pre >.only(&lt;fieldnames-as-strings&gt;)</span></tt> as part of the QuerySet. This will create model instances that only have those values&nbsp;fetched.</p> <p>Persisting changes on the model is allowed only&nbsp;when:</p> <ul class=simple > <li>All the fields you want to update is specified in <tt class="docutils literal"><span class=pre >&lt;model&gt;.save(update_fields=[...])</span></tt> <li>You included the Model primary key in the <tt class="docutils literal"><span class=pre >.only(...)</span></tt> </ul> <p>To protect against common mistakes we ensure that errors get&nbsp;raised:</p> <ul class=simple > <li>If you access a field that is not specified, you will get an <tt class="docutils literal">AttributeError</tt>. <li>If you do a <tt class="docutils literal"><span class=pre >&lt;model&gt;.save()</span></tt> a <tt class="docutils literal">IncompleteInstanceError</tt> will be raised as the model is, as requested,&nbsp;incomplete. <li>If you do a <tt class="docutils literal"><span class=pre >&lt;model&gt;.save(update_fields=[...])</span></tt> and you didn&#8217;t include the primary key in the <tt class="docutils literal"><span class=pre >.only(...)</span></tt>, then <tt class="docutils literal">IncompleteInstanceError</tt> will be raised indicating that updates can&#8217;t be done without the primary key being&nbsp;known. <li>If you do a <tt class="docutils literal"><span class=pre >&lt;model&gt;.save(update_fields=[...])</span></tt> and one of the fields in <tt class="docutils literal">update_fields</tt> was not in the <tt class="docutils literal"><span class=pre >.only(...)</span></tt>, then <tt class="docutils literal">IncompleteInstanceError</tt> as that field is not available to be&nbsp;updated. </ul> </ul> <ul class=simple > <li>Fixed bad <span class=caps >SQL</span> generation when doing a <tt class="docutils literal">.values()</tt> query over a Foreign&nbsp;Key <li>Added <tt class="docutils literal"><span class=pre >&lt;model&gt;.update_from_dict({...})</span></tt> that will mass update values safely from a&nbsp;dictionary <li>Fixed processing <span class=caps >URL</span> encoded password in connection&nbsp;string </ul> </div> </section> <hr/> <aside class=post-meta > <p>Category: <a href="./category/releases.html">Releases</a></p> <p>By <a href="./author/nickolas-grigoriadis.html">Nickolas Grigoriadis</a></p> </aside> <hr/> </article> </ol> </div> </div> <!--<script src="./theme/js/main.js"></script>-->